= content_for :head do
  = javascript_include_tag '//js.pusher.com/2.2/pusher.min.js'
  meta name='channel_id' content=@group.id
  javascript:
    var current_user_details = {
      name: "#{current_user.name}",
      avatar: "#{current_user.decorate.avatar(:thumb)}",
      url: "#{url_for(current_user)}",
      id: "#{current_user.id}",
    };
    var current_user_thumb = "#{j render(partial: 'chat_messages/participant', locals: { participant: current_user })}";

= content_for :no_main do
  section.chat-header
    h1.pull-left
      ==> link_to @group.name, @group
      | chat

    .pull-right
      a.toggle-participants
        i.fa.fa-user>
        span.participants-count
            | 0

    .clearfix

  section.chat-participants style='zdisplay:none'
    ul.list-unstyled

  section.chat-container
    #chat
      .chat-inner
        noscript
          p Please enable Javascript to activate the chat.
        ul.messages.list-unstyled
          - @chat_messages.each do |chat_message|
            = render chat_message

      = simple_form_for ChatMessage.new, url: chat_messages_path(@group.id), html: { data: { remote: true } } do |f|
        = f.input :body, label: false, input_html: { rows: 1, disabled: 'disabled', autofocus: true }, wrapper: false, placeholder: 'Type here, press Enter to send...'