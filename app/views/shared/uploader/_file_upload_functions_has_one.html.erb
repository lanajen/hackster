var <%= file_type %>Functions = {
  fileuploadDone: function(data){
    $('.progress.active', data.context)
      .removeClass('progress-striped')
      .removeClass('active');
    $('.progress-bar', data.context).addClass('progress-bar-success');
    $(data.context).remove();
    file = data.result.file;

    inputTpl = '<span><img>';
    inputTpl += '<input type="hidden" name="<%= model %>[<%= attribute_type %>_id]"></span>';
    input = $(inputTpl);
    id = data.result.id;
    input.find('input').val(id);
    input.find('img').attr('src', file.<%= image_version %>.url);
    $('.<%= file_type %>.image-preview').html(input);
  },

  fileuploadTargetForProgress: function(data){
    return $('.progress-bar', data.context);
  },

  fileuploadTargetForFail: function(data){
    return $('.progress', data.context);
  },

  fileuploadAdd: function(data, file){
    tpl = $('<div><i>Uploading ' + file.name + '</i><div class="progress progress-striped active"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div></div></div>');
    $('.<%= file_type %>.image-preview').html(tpl);
    data.context = tpl;
    return data;
  }
}