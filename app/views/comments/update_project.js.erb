$('.comments-button').replaceWith("<%= escape_javascript render(partial: 'widgets/comments_button', locals: { size: @commentable.comments.size }) %>");

$('#widget-comments .comments').remove();
$("<%= escape_javascript render(partial: 'widgets/comments', locals: { comments: @commentable.comments, commentable: @commentable }) %>").appendTo('#widget-comments .content');
$('#widget-comments .comments')
  .removeClass('collapsed')
  .show();