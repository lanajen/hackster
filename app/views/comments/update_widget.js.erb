$('#widget-<%= @commentable.id %>-comments-button').replaceWith("<%= escape_javascript render(partial: 'widgets/comments_button', locals: { widget: @commentable, size: @commentable.comments.size }) %>");

$('#widget-<%= @commentable.id %>-comments').remove();
$("<%= escape_javascript render(partial: 'widgets/comments', locals: { widget: @commentable, comments: @commentable.comments }) %>").appendTo('#widget-<%= @commentable.id %> .content');
$('#widget-<%= @commentable.id %>-comments')
  .removeClass('collapsed')
  .show();