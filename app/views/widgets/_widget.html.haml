- comments = widget.comments
.well{ id: "widget-#{widget.id}" }
  .header
    %h4{ style: 'position:relative;' }
      = widget.name

      .btn-heading
        .btn-group
          - if can? :update, widget
            = link_to content_tag(:i, '', class: 'icon-edit'), edit_project_widget_path(@project, widget), class: 'btn btn-mini', title: 'Edit'
          - size = comments.size
          = link_to "#{content_tag(:i, '', class: 'icon-comment')} #{size}".html_safe, '#', class: 'btn btn-mini expand', title: 'Comment', data: { target: "#widget-#{widget.id}-comments" }

  .content
    = render partial: "widgets/show/#{widget.identifier}", locals: { widget: widget }
    = render partial: 'widgets/comments', locals: { widget: widget, comments: comments }