- model_class = InviteRequest
.page-header
  %h1
    =t '.title', :default => model_class.model_name.human.pluralize
    %small= link_to t('.new', :default => t("helpers.links.new")), new_admin_invite_request_path, :class => 'btn btn-primary btn-sm'

%table.table.table-striped
  %thead
    %tr
      %th= model_class.human_attribute_name(:email)
      %th= model_class.human_attribute_name(:project)
      %th= model_class.human_attribute_name(:invite_sent)
      %th= model_class.human_attribute_name(:registered)
      %th= model_class.human_attribute_name(:requested_at)
      %th=t '.actions', :default => t("helpers.actions")
  %tbody
    - @invite_requests.each do |invite_request|
      %tr
        %td= invite_request.email
        %td= link_to invite_request.project.name, invite_request.project if invite_request.project
        %td= invite_request.whitelisted
        %td
          - if invite_request.whitelisted
            - user = User.find_by_email(invite_request.email)
            - if user.try(:invitation_accepted_at).try(:present?)
              = link_to user.name, user
        %td=l invite_request.created_at
        %td
          = link_to t('.edit', :default => t("helpers.links.edit")), edit_admin_invite_request_path(invite_request), :class => 'btn btn-default btn-xs'
          = link_to t('.destroy', :default => t("helpers.links.destroy")), admin_invite_request_path(invite_request), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs btn-danger'
          - unless invite_request.whitelisted
            = link_to 'Invite now', send_invite_admin_invite_request_path(invite_request), :class => 'btn btn-warning btn-xs', method: :patch

.pagination.col-xs-12.text-center
  = will_paginate @invite_requests